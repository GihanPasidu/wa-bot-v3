#!/bin/bash
# Quick Setup Guide for External Monitoring - Render Free Tier

clear
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸš¨ CRITICAL: Set Up External Monitoring for Render Free Tier"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "âš ï¸  YOUR BOT WENT OFFLINE TODAY BECAUSE:"
echo "   â€¢ Render free tier spins down after 15 min inactivity"
echo "   â€¢ 50+ second cold start disconnects WhatsApp"
echo "   â€¢ Internal keep-alive alone is NOT enough"
echo ""
echo "âœ… SOLUTION: External monitoring (5 minutes setup)"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Your Render URL
RENDER_URL="https://wa-bot-v3.onrender.com"
HEALTH_URL="${RENDER_URL}/health"

echo "ğŸ“‹ Your Bot URLs:"
echo "   Dashboard: $RENDER_URL"
echo "   Health Check: $HEALTH_URL"
echo ""

echo "ğŸ” Testing health endpoint..."
HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$HEALTH_URL" 2>/dev/null || echo "000")

if [ "$HTTP_STATUS" = "200" ]; then
    echo "âœ… Bot is currently ONLINE"
else
    echo "âš ï¸  Bot is currently OFFLINE or spinning up (Status: $HTTP_STATUS)"
    echo "   This is expected if service just spun down"
fi

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ¥‡ OPTION 1: UptimeRobot (RECOMMENDED - 100% Free)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "â±ï¸  Setup Time: 3 minutes"
echo "âœ¨ Features: 50 monitors, 5-min intervals, SMS alerts"
echo ""
echo "ğŸ“ STEP-BY-STEP:"
echo ""
echo "1. Open this URL in your browser:"
echo "   ğŸ‘‰ https://uptimerobot.com/signUp"
echo ""
echo "2. Create FREE account:"
echo "   â€¢ Enter your email"
echo "   â€¢ Verify email"
echo "   â€¢ Login"
echo ""
echo "3. Create Monitor:"
echo "   â€¢ Click [+ Add New Monitor]"
echo "   â€¢ Monitor Type: HTTP(s)"
echo "   â€¢ Friendly Name: CloudNextra WhatsApp Bot"
echo "   â€¢ URL: $HEALTH_URL"
echo "   â€¢ Monitoring Interval: 5 minutes"
echo "   â€¢ Click [Create Monitor]"
echo ""
echo "4. Done! âœ…"
echo "   â€¢ Bot will NEVER go offline again"
echo "   â€¢ You'll get email alerts if it does"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ¥ˆ OPTION 2: Cron-Job.org (Alternative)"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "â±ï¸  Setup Time: 3 minutes"
echo ""
echo "1. Open: https://cron-job.org/en/signup"
echo "2. Create account and verify email"
echo "3. Click [Create cronjob]"
echo "4. Title: CloudNextra Bot Monitor"
echo "5. URL: $HEALTH_URL"
echo "6. Schedule: */5 * * * * (every 5 minutes)"
echo "7. Click [Create cronjob]"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“Š Expected Results AFTER Setup:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "WITHOUT External Monitoring:"
echo "  â±ï¸  Uptime: ~95-97%"
echo "  ğŸ”´ Risk: Bot can still go offline"
echo ""
echo "WITH External Monitoring (UptimeRobot):"
echo "  â±ï¸  Uptime: 99.5-99.9% âœ…"
echo "  ğŸŸ¢ Bot NEVER spins down"
echo "  ğŸš€ Always responds instantly"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ¯ ACTION REQUIRED:"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "1. Choose ONE option above (UptimeRobot recommended)"
echo "2. Set it up NOW (takes only 3 minutes)"
echo "3. Your bot will stay online 99.9% of the time"
echo ""
echo "âš ï¸  Without this, your bot WILL go offline every 15-20 minutes"
echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
